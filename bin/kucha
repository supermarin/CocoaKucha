#!/usr/bin/env ruby
# Automatic slide switcher for CocoaCucha
#
#
def every_20_seconds
  loop do
    sleep 0.20
    yield
  end
end

def change_slide
  @slide += 1
  puts "Changing slide #{@slide} to slide #{@slide + 1}"
  cmd = %Q(osascript -e 'tell application "System Events" to key code 124 using control down')
  system(cmd)
end

def countdown
  print "Starting in "
  5.downto 1 do |numbah|
    print "#{numbah}..."
    sleep 1
  end
  puts "GO!"
end

# Sorry, I had to
def public_static_void_main(*args)
  @slide = 0
  countdown
  every_20_seconds { change_slide }
end

public_static_void_main

